!function(e,n){if("function"==typeof define&&define.amd)define(["exports","module"],n);else if("undefined"!=typeof exports&&"undefined"!=typeof module)n(exports,module);else{var t={exports:{}};n(t.exports,t),e.Impetus=t.exports}}(this,function(e,n){"use strict";function t(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}function i(){var e=!1;try{var n=Object.defineProperty({},"passive",{get:function(){e=!0}});window.addEventListener("test",null,n)}catch(e){}return i=function(){return e},e}var o=.04,u=.11;window.addEventListener("touchmove",function(){},!!i()&&{passive:!1});var r=function e(n){function r(){document.removeEventListener("touchmove",p,!!i()&&{passive:!1}),document.removeEventListener("touchend",h),document.removeEventListener("touchcancel",y),document.removeEventListener("mousemove",p,!!i()&&{passive:!1}),document.removeEventListener("mouseup",h)}function c(){r(),document.addEventListener("touchmove",p,!!i()&&{passive:!1}),document.addEventListener("touchend",h,!!i()&&{passive:!0}),document.addEventListener("touchcancel",y,!!i()&&{passive:!0}),document.addEventListener("mousemove",p,!!i()&&{passive:!1}),document.addEventListener("mouseup",h,!!i()&&{passive:!0})}function a(){q.call(S,Z,$,_,ee),_=Z,ee=$}function d(){T&&T.call(S,Z,$,_,ee)}function f(){D&&D.call(S,Z,$,_,ee)}function v(){X&&X.call(S,Z,$,_,ee)}function m(e){if("touchmove"===e.type||"touchstart"===e.type||"touchend"===e.type){var n=e.changedTouches[0];return{x:n.clientX,y:n.clientY,id:n.identifier}}return{x:e.clientX,y:e.clientY,id:null}}function l(e){var n=m(e);ie||oe||(d(),ie=!0,ue=!1,N=n.id,G=J=n.x,H=K=n.y,re=[],x(G,H),c())}function p(e){e.preventDefault();var n=m(e);ie&&n.id===N&&(J=n.x,K=n.y,x(G,H),L())}function h(e){var n=m(e);ie&&n.id===N&&y()}function y(){ie=!1,x(G,H),M(),r()}function x(e,n){for(var t=Date.now();re.length>0&&!(t-re[0].time<=100);)re.shift();re.push({x:e,y:n,time:t})}function w(){var e=J-G,n=K-H;if(Z+=e*A,$+=n*A,j){var t=b();0!==t.x&&(Z-=e*E(t.x)*A),0!==t.y&&($-=n*E(t.y)*A)}else b(!0);a(),G=J,H=K,te=!1}function E(e){return 5e-6*Math.pow(e,2)+1e-4*e+.55}function L(){te||s(w),te=!0}function b(e){var n=0,t=0;return void 0!==k&&Z<k?n=k-Z:void 0!==z&&Z>z&&(n=z-Z),void 0!==C&&$<C?t=C-$:void 0!==O&&$>O&&(t=O-$),e&&(0!==n&&(Z=n>0?k:z),0!==t&&($=t>0?C:O)),{x:n,y:t,inBounds:0===n&&0===t}}function M(){var e=re[0],n=re[re.length-1],t=n.x-e.x,i=n.y-e.y,o=n.time-e.time,u=o/15/A;Q=t/u||0,W=i/u||0;var r=b();f(),Math.abs(Q)>1||Math.abs(W)>1||!r.inBounds?(ue=!0,s(g)):v()}function g(){if(ue){Q*=I,W*=I,Z+=Q,$+=W;var e=b();if(Math.abs(Q)>ne||Math.abs(W)>ne||!e.inBounds){if(j){if(0!==e.x)if(e.x*Q<=0)Q+=e.x*o;else{var n=e.x>0?2.5:-2.5;Q=(e.x+n)*u}if(0!==e.y)if(e.y*W<=0)W+=e.y*o;else{var n=e.y>0?2.5:-2.5;W=(e.y+n)*u}}else 0!==e.x&&(Z=e.x>0?k:z,Q=0),0!==e.y&&($=e.y>0?C:O,W=0);a(),s(g)}else ue=!1,v()}}var B=n.source,S=void 0===B?document:B,T=n.onStart,q=n.onUpdate,D=n.onStartDecelerating,X=n.onEndDecelerating,Y=n.multiplier,A=void 0===Y?1:Y,F=n.friction,I=void 0===F?.92:F,P=n.initialValues,U=n.boundX,R=n.boundY,V=n.bounce,j=void 0===V||V;t(this,e);var k,z,C,O,G,H,J,K,N,Q,W,Z=0,$=0,_=null,ee=null,ne=.3*A,te=!1,ie=!1,oe=!1,ue=!1,re=[];!function(){if(!(S="string"==typeof S?document.querySelector(S):S))throw new Error("IMPETUS: source not found.");if(!q)throw new Error("IMPETUS: update function not defined.");P&&(P[0]&&(Z=P[0]),P[1]&&($=P[1]),a()),U&&(k=U[0],z=U[1]),R&&(C=R[0],O=R[1]),S.addEventListener("touchstart",l,!!i()&&{passive:!0}),S.addEventListener("mousedown",l,!!i()&&{passive:!0})}(),this.destroy=function(){return S.removeEventListener("touchstart",l),S.removeEventListener("mousedown",l),r(),null},this.pause=function(){r(),ie=!1,oe=!0},this.resume=function(){oe=!1},this.setValues=function(e,n){"number"==typeof e&&(Z=e),"number"==typeof n&&($=n)},this.setMultiplier=function(e){A=e,ne=.3*A},this.setBoundX=function(e){k=e[0],z=e[1]},this.setBoundY=function(e){C=e[0],O=e[1]}};n.exports=r;var s=function(){return window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||function(e){window.setTimeout(e,1e3/60)}}()});